<div class="task-filter-container">
  <button class="close-btn" (click)="closeModal()">X</button>
  <h2>Filter</h2>

  <form [formGroup]="filterTaskForm" (ngSubmit)="onSubmit()">

      <mat-form-field class="filter-option">
        <mat-label>State</mat-label>
        <mat-select formControlName="states" multiple>
          @for(state of states; track state){
            <mat-option [value]="state">
              {{state}}
            </mat-option>
          }

          @if(states.length === 0){
            <mat-option [disabled]="true">No states available</mat-option>
          }

        </mat-select>
      </mat-form-field>

    <mat-form-field class="assignationsDD">
      <mat-label>Assigned users</mat-label>
      <mat-select formControlName="assignedUsers" multiple [compareWith]="compareUsers">

        <div class="filter-container" (click)="$event.stopPropagation()">
          <input
            #searchUserInput
            (input)="filterUsers(searchUserInput.value)"
            placeholder="Search..."
            class="search-input">
        </div>

        @for(user of filteredUsersOptions; track user.email){
          <mat-option [value]="user">
            {{user.username}}
          </mat-option>
        }

        @if(usersInProject.length === 0){
          <mat-option [disabled]="true">No users available</mat-option>
        }

      </mat-select>
    </mat-form-field>

    <div class="dialog-actions">
      <button type="button" class="cancel-btn" (click)="closeModal()">Cancel</button>
      <button type="submit">Filter</button>
    </div>
  </form>
</div>
